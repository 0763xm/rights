@model Langben.DAL.SysMenu
@{
    Layout = "~/Views/Shared/Create.cshtml";
}
@using Common
@using Models

@section CurentPlace {

    创建

}
<fieldset>
    <legend>
        <input class="a2 f2" type="submit" value="创建" />
        <input class="a2 f2" type="button" onclick="BackList('SysMenu')" value="返回" />
    </legend>
    <div class="bigdiv">

        <div class="editor-label">
            @Html.LabelFor(model => model.Name)：
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Name)
            @Html.ValidationMessageFor(model => model.Name)
        </div>
        <div class="editor-label">
            <a class="anUnderLine" onclick="showModalOnly('ParentId','../../SysMenu');">
                @Html.LabelFor(model => model.ParentId)
            </a>：
        </div>
        <div class="editor-field">
            <div id="checkParentId">
            </div>
            @Html.HiddenFor(model => model.ParentId)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Url)：
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Url)
            @Html.ValidationMessageFor(model => model.Url)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Iconic)：
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Iconic)
            @Html.ValidationMessageFor(model => model.Iconic)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Sort) ：
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.Sort, new { onkeyup = "isInt(this)", @class = "text-box single-line" })
            @Html.ValidationMessageFor(model => model.Sort)
        </div>
        <br style="clear: both;" />
        <div class="editor-label">
            @Html.LabelFor(model => model.Remark)：
        </div>
        <div class="textarea-box">
            @Html.TextAreaFor(model => model.Remark)
            @Html.ValidationMessageFor(model => model.Remark)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.State)：
        </div>
        <div class="editor-field">
            @Html.RadioButtonListFor(model => model.State, Models.SysFieldModels.GetSysField("SysMenu", "State"), true)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.IsLeaf)：
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.IsLeaf)
            @Html.ValidationMessageFor(model => model.IsLeaf)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.SysOperationId)
        </div>
        <div class="editor-field">
            <div id="checkSysOperationId">
                @Html.HiddenFor(model => model.SysOperationId)
                <input id="selOperation" class="easyui-combobox" name="language" data-options="multiple:true, multiline:true, method:'post',valueField:'Id',textField:'Name', panelHeight:'auto'  ">
            </div>
        </div>
    </div>
</fieldset>


<script type="text/javascript">
    $(function () {
        $('#selOperation').combobox({
            url: '/SysOperation/GetAllData',
            formatter: function (row) {
                return '<span class="l-btn-left l-btn-icon-left"><span class="l-btn-text">' + row.Name + '</span><span class="l-btn-icon ' + row.Iconic + '">&nbsp;</span></span>';
            },
            onLoadSuccess: function () {

            },
            onSelect: function (row) {
                //var val = $(this).combobox('getValues');
                var newSysOperationId = $("#SysOperationId").val();
                $("#SysOperationId").val(newSysOperationId + (newSysOperationId.length > 0 ? "^" : "") + row.Id + "&" + row.Name);
            },
            onUnselect: function (row) {
                //var val = $(this).combobox('getValues');
                var newSysOperationId = $("#SysOperationId").val();
                var delVal = row.Id + "&" + row.Name;
                if (newSysOperationId.indexOf("^" + delVal) >= 0)
                    newSysOperationId = newSysOperationId.replace("^" + delVal, "");
                else if (newSysOperationId.indexOf(delVal + "^") >= 0)
                    newSysOperationId = newSysOperationId.replace(delVal + "^", "");
                else
                    newSysOperationId = newSysOperationId.replace(delVal, "");
                $("#SysOperationId").val(newSysOperationId);
            }
        });
    });


</script>

